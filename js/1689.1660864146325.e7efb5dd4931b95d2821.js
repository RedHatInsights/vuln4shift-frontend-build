"use strict";(self.webpackChunkocp_vulnerability_frontend=self.webpackChunkocp_vulnerability_frontend||[]).push([[1689],{5670:(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(3264),a=n.n(r),o=n(5697),i=n.n(o),u=n(6700),c=n(5984),l=n(2443),s=n(8833),p=function(e){var t=e.error,n=e.children;if(!t)return n;switch(parseInt(null==t?void 0:t.status)){case 403:return a().createElement(s.Z,null);case 404:return a().createElement(u.Z,null);case 500:case 502:case 503:return a().createElement(c.Z,null);default:return a().createElement(l.Z,null)}};p.propTypes={error:i().shape({status:i().oneOfType([i().number,i().string])}),children:i().node};const f=p},5862:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(4942),a=n(885),o=n(3264),i=n(3279),u=n.n(i),c=n(3237);const l=function(e){var t=e.urlParam,n=e.label,i=e.placeholder,l=e.value,s=e.apply,p=e.chipLabel,f=(0,o.useState)(),m=(0,a.Z)(f,2),d=m[0],y=m[1],v=(0,o.useState)((function(){return u()((function(e){var n;s((n={},(0,r.Z)(n,t,e),(0,r.Z)(n,"offset",0),n))}),400)})),g=(0,a.Z)(v,1)[0];(0,o.useEffect)((function(){return y(l)}),[l]);var b={type:c.Y.text,label:n,key:t,filterValues:{"aria-label":"search-field",id:"search-".concat(n.id),onChange:function(e,t){y(t),g(t)},placeholder:i,value:d}};return{filterConfig:b,activeFiltersConfig:{isShown:!!l,onDelete:function(){var e;return s((e={},(0,r.Z)(e,t,void 0),(0,r.Z)(e,"offset",0),e))},key:t,category:p,chips:[{name:l}]}}}},7903:(e,t,n)=>{n.d(t,{Z:()=>Z});var r=n(3264),a=n.n(r),o=n(5697),i=n.n(o),u=n(2982),c=n(885),l=n(3193),s=n(448),p=n.n(s),f=n(8100),m=function(e){var t=e.isLoading,n=e.columns,o=e.rows,i=e.isExpandable,s=void 0!==i&&i,m=e.emptyState,d=e.sortParam,y=e.perPage,v=e.apply,g=(0,r.useState)([]),b=(0,c.Z)(g,2),h=b[0],w=b[1],E=(0,r.useState)(!1),P=(0,c.Z)(E,2),Z=P[0],x=P[1];(0,r.useEffect)((function(){x(o.length>0&&o.length===h.length)}),[h]),(0,r.useEffect)((function(){Z&&w(o.map((function(e){return e.key})))}),[o]);var S=function(e){return h.includes(e)},O=function(e,t){if(0===o.length)return{};var n="-"===t[0]?l.SortByDirection.desc:l.SortByDirection.asc;return t=t.replace(/^(-|\+)/,"").split(",")[0],{index:e.findIndex((function(e){return e.sortParam===t})),direction:n,defaultDirection:l.SortByDirection.desc}};return t?a().createElement(p(),{colSize:n.length,rowSize:y||f.UZ,variant:l.TableVariant.compact,columns:n}):a().createElement(l.TableComposable,{variant:l.TableVariant.compact,isStickyHeader:!0},a().createElement(l.Thead,null,a().createElement(l.Tr,null,s&&o.length>0&&a().createElement(l.Th,{expand:{onToggle:function(){return w(Z?[]:o.map((function(e){return e.key})))},areAllExpanded:!Z}}),n.map((function(e,t){return a().createElement(l.Th,{key:e.title,sort:e.sortParam&&(r=t,{sortBy:O(n,d),onSort:function(e,t,a){var i=n[r].sortParam;a===l.SortByDirection.desc&&(i="-"+i),o.length>0&&v({sort:i})},columnIndex:r})},e.title);var r})))),0===o.length?a().createElement(l.Tbody,null,a().createElement(l.Tr,null,a().createElement(l.Td,{colSpan:100},m))):o.map((function(e,t){return a().createElement(l.Tbody,{key:t,isExpanded:S(e.key)},a().createElement(l.Tr,null,s&&a().createElement(l.Td,{expand:{rowIndex:t,isExpanded:S(e.key),onToggle:function(){return function(e,t){return w((function(n){var r=n.filter((function(t){return t!==e}));return t?[].concat((0,u.Z)(r),[e]):r}))}(e.key,!S(e.key))}}}),e.cells.map((function(e,t){return a().createElement(l.Td,{key:t,dataLabel:n[t].title},e)}))),s&&a().createElement(l.Tr,{isExpanded:S(e.key)},a().createElement(l.Td,{colSpan:100},a().createElement(l.ExpandableRowContent,null,e.expandableContent))))})))};m.propTypes={isLoading:i().bool.isRequired,columns:i().arrayOf(i().shape({title:i().node.isRequired,sortParam:i().string})).isRequired,rows:i().arrayOf(i().shape({key:i().string.isRequired,cells:i().arrayOf(i().node).isRequired,expandableContent:i().node})).isRequired,isExpandable:i().bool,emptyState:i().node.isRequired,sortParam:i().string,perPage:i().number,apply:i().func};const d=m;var y=n(9085),v=function(e){var t=e.page,n=e.perPage,r=e.itemCount,o=e.apply,i=e.filterConfig,u=e.activeFiltersConfig,c=e.onExport;return a().createElement(y.Z,{pagination:{isDisabled:0===r,itemCount:r,page:t,perPage:n,ouiaId:"pagination-top",onSetPage:function(e,t,n,r){return o({limit:n,offset:r})},onPerPageSelect:function(e,t){return o({limit:t,offset:0})}},filterConfig:i,activeFiltersConfig:u,exportConfig:c&&{isDisabled:0===r,onSelect:function(e,t){return c(t)}}})};v.propTypes={page:i().number,perPage:i().number,itemCount:i().number,apply:i().func,filterConfig:i().shape({items:i().array}),activeFiltersConfig:i().shape({filters:i().array}),onExport:i().func};const g=v;var b=n(8071),h=function(e){var t=e.page,n=e.perPage,r=e.itemCount,o=e.apply;return a().createElement(b.Pagination,{page:t,itemCount:r,perPage:n,variant:b.PaginationVariant.bottom,ouiaId:"pagination-bottom",isDisabled:0===r,onSetPage:function(e,t,n,r){return o({limit:n,offset:r})},onPerPageSelect:function(e,t){return o({limit:t,offset:0})}})};h.propTypes={page:i().number,perPage:i().number,itemCount:i().number,apply:i().func};const w=h;var E=n(5670),P=function(e){var t=e.isLoading,n=e.isExpandable,r=e.rows,o=e.columns,i=e.filterConfig,u=void 0===i?[]:i,c=e.activeFiltersConfig,l=void 0===c?[]:c,s=e.meta,p=e.error,f=e.emptyState,m=e.apply,y=e.onExport,v=s.offset,b=s.limit,h=s.total_items,P=s.sort;return a().createElement(E.Z,{error:p},a().createElement(g,{page:v/b+1,perPage:b,itemCount:h,apply:m,filterConfig:u,activeFiltersConfig:l,onExport:y}),a().createElement(d,{isLoading:t,columns:o,rows:r,isExpandable:n,emptyState:f,sortParam:P,perPage:b,apply:m}),a().createElement(w,{page:v/b+1,perPage:b,itemCount:h,apply:m}))};P.propTypes={isLoading:i().bool.isRequired,columns:i().arrayOf(i().shape({title:i().node.isRequired,sortParam:i().string})).isRequired,rows:i().arrayOf(i().shape({key:i().string.isRequired,cells:i().arrayOf(i().node).isRequired,expandableContent:i().node})).isRequired,isExpandable:i().bool,emptyState:i().node.isRequired,sortParam:i().string,filterConfig:i().object,activeFiltersConfig:i().object,meta:i().shape({offset:i().number,limit:i().number,total_items:i().number,sort:i().string}),error:i().object,apply:i().func,onExport:i().func};const Z=P},2245:(e,t,n)=>{n.d(t,{Xt:()=>l,Zz:()=>s,l$:()=>p,ZO:()=>f,V2:()=>m,ZH:()=>d});var r=n(5861),a=n(4687),o=n.n(a),i=n(5564),u=n.n(i),c=u().create();c.interceptors.response.use(null,(function(e){var t,n=e.response;if(!u().isCancel(n)&&null!=n&&null!==(t=n.data)&&void 0!==t&&t.error)throw null==n?void 0:n.data.error;return n}));var l=function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.get("/api/ocp-vulnerability/v1/cves",{params:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.get("/api/ocp-vulnerability/v1/clusters",{params:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.get("/api/ocp-vulnerability/v1/cves/".concat(n,"/exposed_clusters"),{params:t}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.get("/api/ocp-vulnerability/v1/cves/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.get("/api/ocp-vulnerability/v1/clusters/".concat(n,"/cves"),{params:t}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.get("/api/ocp-vulnerability/v1/clusters/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},6743:(e,t,n)=>{n.d(t,{_:()=>v,eh:()=>E,S:()=>P});var r=n(5861),a=n(4942),o=n(885),i=n(4687),u=n.n(i),c=n(3264),l=n(7563),s=n(4494),p=n(8100),f=n(3215),m=n(5240);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){var t=(0,c.useState)(localStorage.getItem(e)),n=(0,o.Z)(t,2),r=n[0],a=n[1];return[r,function(t){a(t),localStorage.setItem(e,t)}]};function g(e,t){var n=y({},e);return Object.entries(n).filter((function(e){var n=(0,o.Z)(e,2),r=n[0],a=n[1];return!t.includes(r)||""===a})).forEach((function(e){var t=(0,o.Z)(e,1)[0];return delete n[t]})),n}var b=[function(e){var t=function(e){var t=function(e){return"".concat(1==="".concat(e).length?"0":"").concat(e)},n=new Date(e),r=n.getFullYear(),a=n.getMonth()+1,o=n.getDate();return"".concat(r,"-").concat(t(a),"-").concat(t(o))};if(e.published){var n=p.ab.find((function(t){return t.value===e.published}));e.published="".concat(n.from?t(n.from):"",",").concat(n.to?t(n.to):"")}return e},function(e){return e.affected_clusters&&(e.affected_clusters=p.f9.map((function(t){return e.affected_clusters.split(",").includes(t.value)?"true":"false"})).join(",")),e}],h=function(e){var t=y(y({},e),{},{total_items:void 0});return b.forEach((function(e){t=e(t)})),t},w=["limit","offset"],E=function(e){var t=e.allowedParams,n=e.initialParams,r=e.additionalParam,a=e.fetchAction,i=e.changeParamsAction,u=(0,s.I0)(),p=function(e){return[function(){var t=new URL(window.location);return g(l.parse(t.search),e)},function(e){var t=new URL(window.location),n=l.stringify(e);window.history.replaceState(null,null,"".concat(t.origin).concat(t.pathname,"?").concat(n))}]}(t),f=(0,o.Z)(p,2),m=f[0],d=f[1];(0,c.useEffect)((function(){var e=m();v(y(y({},n),e))}),[]);var v=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=m(),c=y(n?{}:y({},o),e);for(var l in c)w.includes(l)&&(c[l]=Number(c[l]));u(i(c));var s=g(c,t);u(a(h(s),r)),d(s)};return v},P=function(e,t,n){var a=(0,s.I0)(),o={offset:0,limit:100},i=function(){var i=(0,r.Z)(u().mark((function r(i,c){var l,s,p;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a((0,f.wN)({variant:"info",title:"Preparing export. Once complete, your download will start automatically."})),l=(new Date).toISOString().replace(/[T:]/g,"-").split(".")[0]+"-utc",r.next=4,t(y(y({},h(c)),o),n);case 4:s=r.sent,p="json"===i?JSON.stringify(s):s,(0,m.Sv)(p,e+l,i),a((0,f.L1)()),a((0,f.wN)({variant:"success",title:"Downloading export.",description:"Temporary message to QA: Report currently contains only at most 100 items."}));case 9:case"end":return r.stop()}}),r)})));return function(e,t){return i.apply(this,arguments)}}();return i}},7534:(e,t,n)=>{n.d(t,{EK:()=>o,Ew:()=>i,zi:()=>u,ZO:()=>c,FP:()=>l,ZH:()=>s,sK:()=>p,h:()=>f,fD:()=>m,W9:()=>d});var r=n(5910),a=n(2245),o=function(e){return{type:r.eG,meta:{timestamp:new Date},payload:function(){return a.Xt(e)}}},i=function(e){return{type:r.A_,meta:{timestamp:new Date},payload:function(){return a.Zz(e)}}},u=function(e,t){return{type:r.UU,meta:{timestamp:new Date},payload:function(){return a.l$(e,t)}}},c=function(e,t){return{type:r.Vh,meta:{timestamp:new Date,noNotificationOnError:!0},payload:function(){return a.ZO(e,t)}}},l=function(e,t){return{type:r.pq,meta:{timestamp:new Date},payload:function(){return a.V2(e,t)}}},s=function(e,t){return{type:r.H1,meta:{timestamp:new Date,noNotificationOnError:!0},payload:function(){return a.ZH(e,t)}}},p=function(e){return{type:r.pj,meta:{timestamp:new Date},payload:function(){return e}}},f=function(e){return{type:r.GA,meta:{timestamp:new Date},payload:function(){return e}}},m=function(e){return{type:r.ol,meta:{timestamp:new Date},payload:function(){return e}}},d=function(e){return{type:r.r9,meta:{timestamp:new Date},payload:function(){return e}}}}}]);
//# sourceMappingURL=../sourcemaps/1689.c847bb47e677aac805f4863473b31b94.js.map