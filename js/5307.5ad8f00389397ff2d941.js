(self.webpackChunkocpVulnerability=self.webpackChunkocpVulnerability||[]).push([[5307],{59698:(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var n=a(28416),r=a.n(n),i=a(45697),o=a.n(i),l=a(39467),s=a(14878),c=a(46639),p=a(89510);const u=({error:e,children:t})=>{if(!e)return t;switch(parseInt(e?.status)){case 403:return r().createElement(p.Z,{serviceName:"Vulnerability for OpenShift"});case 404:return r().createElement(l.Z,null);case 500:case 502:case 503:return r().createElement(s.Z,null);default:return r().createElement(c.Z,null)}};u.propTypes={error:o().shape({status:o().oneOfType([o().number,o().string])}),children:o().node};const m=u},55027:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(87123);const r=({urlParam:e,label:t,value:a,placeholder:r,items:i,apply:o,chipLabel:l})=>{const s=t=>{o({[e]:t.join(","),offset:0})};return{filterConfig:{label:t,type:n.Yu.checkbox,urlParam:e,key:e,filterValues:{onChange:(e,t)=>{s(t)},items:i,value:a?a.split(","):[],placeholder:r}},activeFiltersConfig:{isShown:!!a,onDelete:e=>{const t=e.map((e=>e.value)),n=a.split(",").filter((e=>!t.includes(e)));s(n)},key:e,category:l,chips:i.filter((e=>a?.split(",").includes(e.value))).map((e=>({name:e.label,value:e.value})))}}}},60395:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var n=a(28416),r=a(23279),i=a.n(r),o=a(87123);const l=({urlParam:e,label:t,placeholder:a,value:r,apply:l,chipLabel:s})=>{const[c,p]=(0,n.useState)(),[u]=(0,n.useState)((()=>i()((t=>{l({[e]:t,offset:0})}),400)));(0,n.useEffect)((()=>p(r)),[r]);const m={type:o.Yu.text,label:t,key:e,filterValues:{"aria-label":"search-field",id:`text-filter-${e}`,onChange:(e,t)=>{p(t),u(t)},placeholder:a,value:c}};return{filterConfig:m,activeFiltersConfig:{isShown:!!r,onDelete:()=>l({[e]:void 0,offset:0}),key:e,category:s,chips:[{name:r}]}}}},98249:(e,t,a)=>{"use strict";a.d(t,{Z:()=>O});var n=a(28416),r=a.n(n),i=a(45697),o=a.n(i),l=a(38800),s=a(5697),c=a(51630),p=a(8128),u=a(98927),m=a(75521),d=a(64249),f=a(2613),g=a(60448),y=a.n(g),b=a(75863),h=a(75928);const v=({isLoading:e,columns:t,rows:a,isExpandable:i=!1,emptyState:o,sortParam:g,perPage:v,apply:E})=>{const[w,P]=(0,n.useState)([]),[x,S]=(0,n.useState)(!1);(0,n.useEffect)((()=>{S(a.length>0&&a.length===w.length)}),[w]),(0,n.useEffect)((()=>{x&&P(a.map((e=>e.key)))}),[a]);const C=e=>w.includes(e),D=(e,t,n)=>{if(0===a.length||!t)return{};const r="-"===t[0]?l.B.desc:l.B.asc;return t=t.replace(/^(-|\+)/,"").split(",")[0],{index:e.findIndex((e=>e.sortParam===t)),direction:r,defaultDirection:e[n]?.sortDefaultDirection??l.B.desc}};return e?r().createElement(y(),{variant:b.B.compact,rows:v||h.UZ,columns:t.map((e=>e.title)),sortBy:D(t,g)}):r().createElement(s.i,{variant:b.B.compact,isStickyHeader:!0},r().createElement(c.h,null,r().createElement(p.Tr,null,i&&a.length>0&&r().createElement(u.Th,{expand:{onToggle:()=>P(x?[]:a.map((e=>e.key))),areAllExpanded:!x},ouiaId:"expand-all"}),t.map(((e,n)=>{return r().createElement(u.Th,{key:e.title,sort:e.sortParam&&(i=n,{sortBy:D(t,g,i),onSort:(e,n,r)=>{let o=t[i].sortParam;r===l.B.desc&&(o="-"+o),a.length>0&&E({sort:o})},columnIndex:i})},e.title);var i})))),0===a.length?r().createElement(m.p,null,r().createElement(p.Tr,null,r().createElement(d.Td,{colSpan:100},o))):a.map(((e,a)=>r().createElement(m.p,{key:a,isExpanded:C(e.key)},r().createElement(p.Tr,null,i&&r().createElement(d.Td,{expand:{rowIndex:a,isExpanded:C(e.key),onToggle:()=>((e,t)=>P((a=>{const n=a.filter((t=>t!==e));return t?[...n,e]:n})))(e.key,!C(e.key))}}),e.cells.map(((e,a)=>r().createElement(d.Td,{key:a,dataLabel:t[a].title},e)))),i&&r().createElement(p.Tr,{isExpanded:C(e.key)},r().createElement(d.Td,{colSpan:100},r().createElement(f.G,null,e.expandableContent)))))))};v.propTypes={isLoading:o().bool.isRequired,columns:o().arrayOf(o().shape({title:o().node.isRequired,sortParam:o().string,sortDefaultDirection:o().oneOf([void 0,"asc","desc"])})).isRequired,rows:o().arrayOf(o().shape({key:o().string.isRequired,cells:o().arrayOf(o().node).isRequired,expandableContent:o().node})).isRequired,isExpandable:o().bool,emptyState:o().node.isRequired,sortParam:o().string,perPage:o().number,apply:o().func};const E=v;var w=a(10097),P=a(80174);const x=({isLoading:e,page:t,perPage:a,itemCount:n,apply:i,filterConfig:o,activeFiltersConfig:l,onExport:s})=>r().createElement(w.Z,{pagination:e?r().createElement(P.Skeleton,{fontSize:"xl",width:"200px",style:{margin:10}}):{isDisabled:0===n,itemCount:n,page:t,perPage:a,ouiaId:"pagination-top",onSetPage:(e,t,a,n)=>i({limit:a,offset:n}),onPerPageSelect:(e,t)=>i({limit:t,offset:0})},filterConfig:o,activeFiltersConfig:l,exportConfig:s&&{isDisabled:0===n,onSelect:(e,t)=>s(t)}});x.propTypes={isLoading:o().bool,page:o().number,perPage:o().number,itemCount:o().number,apply:o().func,filterConfig:o().shape({items:o().array}),activeFiltersConfig:o().shape({filters:o().array}),onExport:o().func};const S=x;var C=a(6520);const D=({isLoading:e,page:t,perPage:a,itemCount:n,apply:i})=>e?r().createElement("div",{className:"pf-c-pagination pf-m-bottom"},r().createElement(P.Skeleton,{fontSize:"xl",width:"350px",style:{margin:10}})):r().createElement(C.Pagination,{page:t,itemCount:n,perPage:a,variant:C.PaginationVariant.bottom,ouiaId:"pagination-bottom",isDisabled:0===n,onSetPage:(e,t,a,n)=>i({limit:a,offset:n}),onPerPageSelect:(e,t)=>i({limit:t,offset:0})});D.propTypes={isLoading:o().bool,page:o().number,perPage:o().number,itemCount:o().number,apply:o().func};const k=D;var Z=a(59698);const T=({isLoading:e,isExpandable:t,rows:a,columns:n,filterConfig:i=[],activeFiltersConfig:o=[],meta:l,error:s,emptyState:c,apply:p,onExport:u})=>{const{offset:m,limit:d,total_items:f,sort:g}=l;return r().createElement(Z.Z,{error:s},r().createElement(S,{isLoading:e,page:m/d+1,perPage:d,itemCount:f,apply:p,filterConfig:i,activeFiltersConfig:o,onExport:u}),r().createElement(E,{isLoading:e,columns:n,rows:a,isExpandable:t,emptyState:c,sortParam:g,perPage:d,apply:p}),r().createElement(k,{isLoading:e,page:m/d+1,perPage:d,itemCount:f,apply:p}))};T.propTypes={isLoading:o().bool.isRequired,columns:o().arrayOf(o().shape({title:o().node.isRequired,sortParam:o().string})).isRequired,rows:o().arrayOf(o().shape({key:o().string.isRequired,cells:o().arrayOf(o().node).isRequired,expandableContent:o().node})).isRequired,isExpandable:o().bool,emptyState:o().node.isRequired,sortParam:o().string,filterConfig:o().object,activeFiltersConfig:o().object,meta:o().shape({offset:o().number,limit:o().number,total_items:o().number,sort:o().string}),error:o().object,apply:o().func,onExport:o().func};const O=T},41533:(e,t,a)=>{"use strict";a.d(t,{V2:()=>p,Xt:()=>o,ZH:()=>u,ZO:()=>c,Zz:()=>l,l$:()=>s});var n=a(5527),r=a.n(n);const i=r().create();i.interceptors.response.use(null,(({response:e})=>{if(!r().isCancel(e)&&e?.data?.error)throw e?.data.error;return e}));const o=async e=>i.get("/api/ocp-vulnerability/v1/cves",{params:e}),l=async e=>i.get("/api/ocp-vulnerability/v1/clusters",{params:e}),s=async(e,t)=>i.get(`/api/ocp-vulnerability/v1/cves/${t}/exposed_clusters`,{params:e}),c=async e=>i.get(`/api/ocp-vulnerability/v1/cves/${e}`),p=async(e,t)=>i.get(`/api/ocp-vulnerability/v1/clusters/${t}/cves`,{params:e}),u=async e=>i.get(`/api/ocp-vulnerability/v1/clusters/${e}`)},46046:(e,t,a)=>{"use strict";a.d(t,{S:()=>g,_:()=>c,eh:()=>f});var n=a(28416),r=a(46685),i=a(65422),o=a(75928),l=a(83215),s=a(35240);const c=e=>{const[t,a]=(0,n.useState)(localStorage.getItem(e));return[t,t=>{a(t),localStorage.setItem(e,t)}]};function p(e,t){const a={...e};return Object.entries(a).filter((([e,a])=>!t.includes(e)||""===a)).forEach((([e])=>delete a[e])),a}const u=[e=>{const t=e=>{const t=e=>`${1===`${e}`.length?"0":""}${e}`,a=new Date(e),n=a.getFullYear(),r=a.getMonth()+1,i=a.getDate();return`${n}-${t(r)}-${t(i)}`};if(e.published){const a=o.ab.find((t=>t.value===e.published));e.published=`${a.from?t(a.from):""},${a.to?t(a.to):""}`}return e},e=>(e.affected_clusters&&(e.affected_clusters=o.f9.map((t=>e.affected_clusters.split(",").includes(t.value)?"true":"false")).join(",")),e),e=>(e.cluster_severity?e.cluster_severity.split(",").includes("any")&&(e.cluster_severity=void 0):e.cluster_severity="low,moderate,important,critical",e)],m=e=>{let t={...e,total_items:void 0};return u.forEach((e=>{t=e(t)})),t},d=["limit","offset"],f=({allowedParams:e,initialParams:t,additionalParam:a,fetchAction:o,changeParamsAction:l})=>{const s=(0,i.I0)(),[c,u]=(e=>[()=>{const t=new URL(window.location);return p(r.Z.parse(t.search),e)},e=>{const t=new URL(window.location),a=r.Z.stringify(e);window.history.replaceState(null,null,`${t.origin}${t.pathname}?${a}`)}])(e),[f,g]=(0,n.useState)(!0);(0,n.useEffect)((()=>{f||""!==window.location.search||y({...t})}),[window.location.search]),(0,n.useEffect)((()=>{const e=c();y({...t,...e}),g(!1)}),[]);const y=(t,n=!1)=>{const r=c();let i=n?{...t}:{...r,...t};for(const e in i)d.includes(e)&&(i[e]=Number(i[e]));s(l(i));const f=p(i,e);s(o(m(f),a)),u(f)};return y},g=({filenamePrefix:e,fetchAction:t,fetchActionParam:a,allowedParams:n})=>{const r=(0,i.I0)(),o={report:!0};return async(i,c)=>{r((0,l.wN)({variant:"info",title:"Preparing export. Once complete, your download will start automatically."}));const u=(new Date).toISOString().replace(/[T:]/g,"-").split(".")[0]+"-utc",d=p(c,n),f=await t({...m(d),...o,data_format:i},a);let g="json"===i?JSON.stringify(f.data.data):f.data.data;(0,s.Sv)(g,e+u,i),r((0,l.L1)()),r((0,l.wN)({variant:"success",title:"Downloading export"}))}}},73710:(e,t,a)=>{"use strict";a.d(t,{EK:()=>i,Ew:()=>o,FP:()=>c,W9:()=>f,ZH:()=>p,ZO:()=>s,fD:()=>d,h:()=>m,sK:()=>u,zi:()=>l});var n=a(12949),r=a(41533);const i=e=>({type:n.eG,meta:{timestamp:new Date},payload:()=>r.Xt(e)}),o=e=>({type:n.A_,meta:{timestamp:new Date},payload:()=>r.Zz(e)}),l=(e,t)=>({type:n.UU,meta:{timestamp:new Date},payload:()=>r.l$(e,t)}),s=(e,t)=>({type:n.Vh,meta:{timestamp:new Date,noNotificationOnError:!0},payload:()=>r.ZO(e,t)}),c=(e,t)=>({type:n.pq,meta:{timestamp:new Date},payload:()=>r.V2(e,t)}),p=(e,t)=>({type:n.H1,meta:{timestamp:new Date,noNotificationOnError:!0},payload:()=>r.ZH(e,t)}),u=e=>({type:n.pj,meta:{timestamp:new Date},payload:()=>e}),m=e=>({type:n.GA,meta:{timestamp:new Date},payload:()=>e}),d=e=>({type:n.ol,meta:{timestamp:new Date},payload:()=>e}),f=e=>({type:n.r9,meta:{timestamp:new Date},payload:()=>e})},45467:()=>{},58392:()=>{},32857:()=>{},28992:()=>{},30187:()=>{},21626:()=>{},8572:()=>{},98379:()=>{},91993:()=>{},53336:()=>{},54994:()=>{},44690:()=>{},37494:()=>{},67761:()=>{},49854:()=>{}}]);
//# sourceMappingURL=../sourcemaps/5307.e82b6c1468d95e44efad8776428cdf36.js.map