{"version":3,"file":"js/ClusterListPage.1661953096384.6a572d03a90d9c78769d.js","mappings":"uIAEAA,EAAQ,GAAuB,CAC7BC,KAAM,iBACNC,OAAQ,IACRC,MAAO,IACPC,QAAS,qRACTC,QAAS,EACTC,QAAS,GAEXN,EAAQ,GAAiB,mBAAoCA,EAAQ,IACrEA,EAAA,GAAqBA,EAAQ,E,q8BCW7B,QAb2B,WACzB,+CAAC,EAAAO,SAAD,KACE,kBAAC,EAAAC,WAAD,CAAYC,QAASC,EAAAA,kBAAAA,OACnB,kBAAC,EAAAC,MAAD,CAAOC,aAAa,KAAKC,KAAK,MAA9B,8BAGA,kBAAC,EAAAC,eAAD,kEAIO,C,+gCC0Bb,QAjCmB,WACjB,+CAAC,EAAAP,SAAD,KACE,kBAAC,EAAAC,WAAD,CAAYC,QAASC,EAAAA,kBAAAA,OACnB,kBAAC,EAAAK,eAAD,CAAgBC,KAAMC,EAAAA,GAAgBJ,KAAK,OAC3C,kBAAC,EAAAF,MAAD,CAAOC,aAAa,KAAKC,KAAK,MAA9B,mBAGA,kBAAC,EAAAC,eAAD,wGAIA,kBAAC,EAAAI,OAAD,CACET,QAAQ,UACRU,UAAU,IACVC,KAAK,+CACLC,OAAO,UAJT,kBAQA,6BACA,kBAAC,EAAAH,OAAD,CACET,QAAQ,OACRU,UAAU,IACVC,KAAK,iDACLC,OAAO,SACPC,UAAU,cALZ,qBAUO,E,8rFCqDb,QAvE2B,WAAM,iBAC/B,mBAA6CC,EAAAA,EAAAA,KAC3C,YAA0BC,IAAvBA,EAAuBA,EAAvBA,iBAAuBA,OAAAA,IAAAA,EAAAA,KAAAA,IAAAA,EAAAA,KAAAA,CAAgB,KADpCC,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,UAAWC,EAA7B,EAA6BA,KAAMC,EAAnC,EAAmCA,MAI7BC,GAAK,YAAGC,EAAAA,EAAAA,IAAkB,CAC9BC,cAAeC,EAAAA,GACfC,cAAeN,EACfO,YAAaC,EAAAA,GACbC,mBAAoBC,EAAAA,KAGtB,cAAqEV,GAA7DW,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,OAAQC,EAAxB,EAAwBA,iBAAkBC,EAA1C,EAA0CA,uBAEpCC,GAAQ,YAAGC,EAAAA,EAAAA,GAAUC,EAAAA,GAA4BC,EAAAA,KAEjDC,GAAO,WAAG,EACdC,EAAAA,EAAAA,GAAc,CACZC,SAAU,SACVC,MAAO,OACPC,YAAa,iBACbC,MAAOb,EACPT,MAAAA,EACAuB,UAAW,iBAEbC,EAAAA,EAAAA,GAAe,CACbL,SAAU,SACVC,MAAO,SACPE,MAAOZ,EACPe,MAAOC,EAAAA,GAAAA,QACL,wBAACd,SAAD,uBAA2B,KAAIe,KAAI,SAACjB,GAAY,8BAC9CU,MAAOV,EACPY,MAAOZ,EACR,KAEHW,YAAa,mBACbrB,MAAAA,EACAuB,UAAW,YAEbC,EAAAA,EAAAA,GAAe,CACbL,SAAU,mBACVC,MAAO,gBACPE,MAAOX,EACPc,MAAOG,EAAAA,GAAAA,QAAwB,SAACC,GAAW,6BAAiB,SAAjBA,EAAOP,KAAgB,IAClED,YAAa,0BACbrB,MAAAA,EACAuB,UAAW,oBAIf,eACEO,EAAAA,EAAAA,IAAab,EAASnB,EAAMiC,EAAAA,GAA8B/B,IAD5D,eAAOgC,EAAP,KAAqBC,EAArB,KAA0CC,EAA1C,KAGA,OArD+B,YAsD7B,kBAACC,EAAA,EAAD,CACEtC,UAAWA,EACXuC,KAAMxC,EAAS+B,KAAI,SAACU,GAAQ,+BAAAC,EAAAA,EAAAA,IAA0BD,EAAI,IAC1DE,QAASC,EAAAA,GACTR,aAAcA,EACdC,oBAAqBA,EACrBnC,KAAMA,EACNC,MAAOA,EACP0C,WACEP,GAAoB,cAAG,kBAACQ,EAAA,EAAD,QAAH,cAA4B,kBAAC,EAAD,OAElD1C,MAAOA,EACPa,SAAU,SAAC8B,GAAW,8BAAA9B,EAAS8B,EAAQ7C,EAAK,GAGjD,E,i0CChDD,QA9BwB,WAAM,WAC5B,mBAA2D8C,EAAAA,EAAAA,GACzDC,EAAAA,KADF,eAAOC,EAAP,KAAgCC,EAAhC,KAIA,OAL4B,WAM1B,kBAAC,EAAAC,SAAD,KACE,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAiBC,MAAM,sBAAsB1D,UAAU,gBACtD,eAACqD,IAAD,cACC,kBAAC,EAAAM,MAAD,CACExE,QAASyE,EAAAA,aAAAA,KACTC,UAAQ,EACR7D,UAAU,aACV0D,MAAM,4DACNI,YACE,kBAAC,EAAAC,uBAAD,CACEC,QAAS,WAAM,sBAAAC,EAAA,KAAAX,GAAwB,EAAK,SAMtD,kBAACY,EAAA,EAAD,KACE,kBAACC,EAAD,OAIP,C,szFCWD,QApDuB,SAAC,GAQlB,IAPJzC,EAOI,EAPJA,SACAC,EAMI,EANJA,MACAE,EAKI,EALJA,MACAD,EAII,EAJJA,YACAI,EAGI,EAHJA,MACAzB,EAEI,EAFJA,MACAuB,EACI,EADJA,UACI,sBACJ,IAAMsC,EAAkB,SAACC,GAAW,4BAClC9D,GAAK,eACFmB,EAAW2C,EAAOC,KAAK,OADrB,kBAEK,GAFL,GAIN,EAEK/B,GAAY,WAAG,CACnBZ,MAAAA,EACA4C,KAAMC,EAAAA,EAAAA,SACN9C,SAAAA,EACA+C,IAAK/C,EACLgD,aAAc,CACZC,SAAU,SAACC,EAAO/C,GAAU,sBAC1BuC,EAAgBvC,EACjB,EACDG,MAAAA,EACAH,MAAOA,GAAK,cAAGA,EAAMgD,MAAM,OAAf,cAAsB,IAClCjD,YAAAA,KAIEY,GAAmB,WAAG,CAC1BsC,UAAWjD,EACXkD,SAAU,SAACC,GAAU,WACnB,IAAMC,GAAa,WAAGD,EAAM9C,KAAI,SAACgD,GAAS,6BAAAA,EAAKrD,KAAK,KAE9CsD,GAAQ,WAAGtD,EACdgD,MAAM,KACNO,QAAO,SAACvD,GAAU,8BAACoD,EAAcI,SAASxD,EAAM,KALhC,YAOnBuC,EAAgBe,EACjB,EACDV,IAAK/C,EACL4D,SAAUxD,EACVkD,MAAOhD,EACJoD,QAAO,SAACG,GAAS,8BAAA1D,aAAA,EAAAA,EAAOgD,MAAM,KAAKQ,SAASE,EAAK1D,MAAM,IACvDK,KAAI,SAACqD,GAAU,+BAAE5G,KAAM4G,EAAK5D,MAAOE,MAAO0D,EAAK1D,MAAO,MAG3D,OAzCI,YAyCG,CAAEU,aAAAA,EAAcC,oBAAAA,EACxB,C","sources":["webpack:///./node_modules/@patternfly/react-icons/dist/js/icons/plus-circle-icon.js","webpack:///./src/Components/PresentationalComponents/EmptyStates/NoMatchingClusters.js","webpack:///./src/Components/PresentationalComponents/EmptyStates/NoClusters.js","webpack:///./src/Components/SmartComponents/ClusterList/ClusterListTable.js","webpack:///./src/Components/SmartComponents/ClusterList/ClusterListPage.js","webpack:///./src/Components/SmartComponents/Filters/CheckboxFilter.js"],"sourcesContent":["\"use strict\"\nexports.__esModule = true;\nexports.PlusCircleIconConfig = {\n  name: 'PlusCircleIcon',\n  height: 512,\n  width: 512,\n  svgPath: 'M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z',\n  yOffset: 0,\n  xOffset: 0,\n};\nexports.PlusCircleIcon = require('../createIcon').createIcon(exports.PlusCircleIconConfig);\nexports[\"default\"] = exports.PlusCircleIcon;","import React from 'react';\nimport {\n  EmptyState,\n  EmptyStateBody,\n  Bullseye,\n  EmptyStateVariant,\n  Title,\n} from '@patternfly/react-core';\n\nconst NoMatchingClusters = () => (\n  <Bullseye>\n    <EmptyState variant={EmptyStateVariant.large}>\n      <Title headingLevel=\"h5\" size=\"lg\">\n        No matching clusters found\n      </Title>\n      <EmptyStateBody>\n        To continue, edit your filter settings and search again.\n      </EmptyStateBody>\n    </EmptyState>\n  </Bullseye>\n);\n\nexport default NoMatchingClusters;\n","import React from 'react';\nimport {\n  EmptyState,\n  EmptyStateBody,\n  EmptyStateIcon,\n  Button,\n  Bullseye,\n  Title,\n  EmptyStateVariant,\n} from '@patternfly/react-core';\nimport { PlusCircleIcon } from '@patternfly/react-icons';\n\nconst NoClusters = () => (\n  <Bullseye>\n    <EmptyState variant={EmptyStateVariant.large}>\n      <EmptyStateIcon icon={PlusCircleIcon} size=\"sm\" />\n      <Title headingLevel=\"h5\" size=\"lg\">\n        No clusters yet\n      </Title>\n      <EmptyStateBody>\n        To get started, create or register your cluster to get information from\n        Insights Vulnerability.\n      </EmptyStateBody>\n      <Button\n        variant=\"primary\"\n        component=\"a\"\n        href=\"https://console.redhat.com/openshift/create/\"\n        target=\"_blank\"\n      >\n        Create Cluster\n      </Button>\n      <br />\n      <Button\n        variant=\"link\"\n        component=\"a\"\n        href=\"https://console.redhat.com/openshift/register/\"\n        target=\"_blank\"\n        className=\"pf-u-mt-md\"\n      >\n        Register Cluster\n      </Button>\n    </EmptyState>\n  </Bullseye>\n);\n\nexport default NoClusters;\n","import React from 'react';\nimport {\n  CLUSTER_LIST_ALLOWED_PARAMS,\n  CLUSTER_LIST_DEFAULT_FILTERS,\n  CLUSTER_LIST_EXPORT_PREFIX,\n  CLUSTER_LIST_TABLE_COLUMNS,\n  CLUSTER_LIST_TABLE_MAPPER,\n  CLUSTER_STATUS_OPTIONS,\n  SEVERITY_OPTIONS,\n} from '../../../Helpers/constants';\nimport { useSelector } from 'react-redux';\nimport {\n  changeClusterListTableParams,\n  fetchClusterListTable,\n} from '../../../Store/Actions';\nimport NoClusters from '../../PresentationalComponents/EmptyStates/NoClusters';\nimport useTextFilter from '../Filters/TextFilter';\nimport { useExport, useUrlBoundParams } from '../../../Helpers/hooks';\nimport BaseTable from '../Generic/BaseTable';\nimport { setupFilters } from '../../../Helpers/miscHelper';\nimport NoMatchingClusters from '../../PresentationalComponents/EmptyStates/NoMatchingClusters';\nimport { fetchClusters } from '../../../Helpers/apiHelper';\nimport checkboxFilter from '../Filters/CheckboxFilter';\n\nconst ClusterDetailTable = () => {\n  const { clusters, isLoading, meta, error } = useSelector(\n    ({ ClusterListStore }) => ClusterListStore\n  );\n\n  const apply = useUrlBoundParams({\n    allowedParams: CLUSTER_LIST_ALLOWED_PARAMS,\n    initialParams: meta,\n    fetchAction: fetchClusterListTable,\n    changeParamsAction: changeClusterListTableParams,\n  });\n\n  const { search, status, cluster_severity, dynamic_status_options } = meta;\n\n  const onExport = useExport(CLUSTER_LIST_EXPORT_PREFIX, fetchClusters);\n\n  const filters = [\n    useTextFilter({\n      urlParam: 'search',\n      label: 'Name',\n      placeholder: 'Filter by name',\n      value: search,\n      apply,\n      chipLabel: 'Search term',\n    }),\n    checkboxFilter({\n      urlParam: 'status',\n      label: 'Status',\n      value: status,\n      items: CLUSTER_STATUS_OPTIONS.concat(\n        (dynamic_status_options ?? []).map((status) => ({\n          label: status,\n          value: status,\n        }))\n      ),\n      placeholder: 'Filter by status',\n      apply,\n      chipLabel: 'Status',\n    }),\n    checkboxFilter({\n      urlParam: 'cluster_severity',\n      label: 'CVEs severity',\n      value: cluster_severity,\n      items: SEVERITY_OPTIONS.filter((option) => option.value !== 'none'),\n      placeholder: 'Filter by CVEs severity',\n      apply,\n      chipLabel: 'CVEs severity',\n    }),\n  ];\n\n  const [filterConfig, activeFiltersConfig, areAnyFiltersApplied] =\n    setupFilters(filters, meta, CLUSTER_LIST_DEFAULT_FILTERS, apply);\n\n  return (\n    <BaseTable\n      isLoading={isLoading}\n      rows={clusters.map((row) => CLUSTER_LIST_TABLE_MAPPER(row))}\n      columns={CLUSTER_LIST_TABLE_COLUMNS}\n      filterConfig={filterConfig}\n      activeFiltersConfig={activeFiltersConfig}\n      meta={meta}\n      error={error}\n      emptyState={\n        areAnyFiltersApplied ? <NoMatchingClusters /> : <NoClusters />\n      }\n      apply={apply}\n      onExport={(format) => onExport(format, meta)}\n    />\n  );\n};\n\nexport default ClusterDetailTable;\n","import React, { Fragment } from 'react';\nimport {\n  Alert,\n  AlertActionCloseButton,\n  AlertVariant,\n} from '@patternfly/react-core';\nimport { Main } from '@redhat-cloud-services/frontend-components/Main';\nimport {\n  PageHeader,\n  PageHeaderTitle,\n} from '@redhat-cloud-services/frontend-components/PageHeader';\nimport ClusterListTable from './ClusterListTable';\nimport { HEADER_ALERT_DISMISSED_KEY } from '../../../Helpers/constants';\nimport { useLocalStorage } from '../../../Helpers/hooks';\n\nconst ClusterListPage = () => {\n  const [wasHeaderAlertDismissed, setHeaderAlertDismissed] = useLocalStorage(\n    HEADER_ALERT_DISMISSED_KEY\n  );\n\n  return (\n    <Fragment>\n      <PageHeader>\n        <PageHeaderTitle title=\"Vulnerable clusters\" className=\"pf-u-mb-sm\" />\n        {!wasHeaderAlertDismissed && (\n          <Alert\n            variant={AlertVariant.info}\n            isInline\n            className=\"pf-u-mt-md\"\n            title=\"Vulnerability information applies to OCP4.8+ version only\"\n            actionClose={\n              <AlertActionCloseButton\n                onClose={() => setHeaderAlertDismissed(true)}\n              />\n            }\n          />\n        )}\n      </PageHeader>\n      <Main>\n        <ClusterListTable />\n      </Main>\n    </Fragment>\n  );\n};\n\nexport default ClusterListPage;\n","import { conditionalFilterType } from '@redhat-cloud-services/frontend-components/ConditionalFilter';\n\nconst checkboxFilter = ({\n  urlParam,\n  label,\n  value,\n  placeholder,\n  items,\n  apply,\n  chipLabel,\n}) => {\n  const onValuesChanged = (values) => {\n    apply({\n      [urlParam]: values.join(','),\n      offset: 0,\n    });\n  };\n\n  const filterConfig = {\n    label,\n    type: conditionalFilterType.checkbox,\n    urlParam,\n    key: urlParam,\n    filterValues: {\n      onChange: (event, value) => {\n        onValuesChanged(value);\n      },\n      items,\n      value: value ? value.split(',') : [],\n      placeholder,\n    },\n  };\n\n  const activeFiltersConfig = {\n    isShown: !!value,\n    onDelete: (chips) => {\n      const itemsToRemove = chips.map((chip) => chip.value);\n\n      const newValue = value\n        .split(',')\n        .filter((value) => !itemsToRemove.includes(value));\n\n      onValuesChanged(newValue);\n    },\n    key: urlParam,\n    category: chipLabel,\n    chips: items\n      .filter((item) => value?.split(',').includes(item.value))\n      .map((item) => ({ name: item.label, value: item.value })),\n  };\n\n  return { filterConfig, activeFiltersConfig };\n};\n\nexport default checkboxFilter;\n"],"names":["exports","name","height","width","svgPath","yOffset","xOffset","Bullseye","EmptyState","variant","EmptyStateVariant","Title","headingLevel","size","EmptyStateBody","EmptyStateIcon","icon","PlusCircleIcon","Button","component","href","target","className","useSelector","ClusterListStore","clusters","isLoading","meta","error","apply","useUrlBoundParams","allowedParams","CLUSTER_LIST_ALLOWED_PARAMS","initialParams","fetchAction","fetchClusterListTable","changeParamsAction","changeClusterListTableParams","search","status","cluster_severity","dynamic_status_options","onExport","useExport","CLUSTER_LIST_EXPORT_PREFIX","fetchClusters","filters","useTextFilter","urlParam","label","placeholder","value","chipLabel","checkboxFilter","items","CLUSTER_STATUS_OPTIONS","map","SEVERITY_OPTIONS","option","setupFilters","CLUSTER_LIST_DEFAULT_FILTERS","filterConfig","activeFiltersConfig","areAnyFiltersApplied","BaseTable","rows","row","CLUSTER_LIST_TABLE_MAPPER","columns","CLUSTER_LIST_TABLE_COLUMNS","emptyState","NoMatchingClusters","format","useLocalStorage","HEADER_ALERT_DISMISSED_KEY","wasHeaderAlertDismissed","setHeaderAlertDismissed","Fragment","PageHeader","PageHeaderTitle","title","Alert","AlertVariant","isInline","actionClose","AlertActionCloseButton","onClose","s","Main","ClusterListTable","onValuesChanged","values","join","type","conditionalFilterType","key","filterValues","onChange","event","split","isShown","onDelete","chips","itemsToRemove","chip","newValue","filter","includes","category","item"],"sourceRoot":""}